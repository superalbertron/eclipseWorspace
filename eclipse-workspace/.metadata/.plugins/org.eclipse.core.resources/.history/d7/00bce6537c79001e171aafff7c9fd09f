package conectarmysql;
import java.sql.CallableStatement;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Types;
import java.sql.ResultSet;

public class InvocarProcedimiento4 {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
			Connection conn = null;
	        CallableStatement cstmt = null;

	        try {
	            conn = DriverManager.getConnection("jdbc:mysql://localhost/phonelandcenec", "root", "");

	            // Llamar al procedimiento almacenado
	            cstmt = conn.prepareCall("call CalculaPrecioDescuentoIvaTota(?,?,?,?,?)");
	          
	            // introducirmos los valores necesarios
	            cstmt.setDouble(1, 100.0); //1 es el primer valor del argumento del procedimiento
	            for (int i=2; i<6;i++) {
	            	cstmt.registerOutParameter(i, Types.DECIMAL);
	            }
	            
	            // Ejecutar el procedimiento
	            cstmt.execute();

	            // Obtener los resultados si el procedimiento devuelve algo
	            int edad=cstmt.getInt(2);//el parametro dos es el que me tiene que devolver
	            
	            System.out.println("Procedimiento invocado");
	            System.out.println("El importe con iva "+edad);

	            conn.close();
	        } catch (SQLException e) {
	            e.printStackTrace();
	        }
	}
}